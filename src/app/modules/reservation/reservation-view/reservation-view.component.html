<div class="reservation-view-dialog">
  <h2 mat-dialog-title class="text-2xl font-bold text-gray-800 pb-2 border-b border-gray-200">
    {{ labels.title }} - {{ data.fullName }}
  </h2>

  <mat-dialog-content class="min-w-[800px] max-h-[80vh] overflow-y-auto">
    <div class="flex flex-col gap-6 py-4">
      <!-- Client Information Section -->
      <div class="bg-gradient-to-r from-gray-50 to-slate-50 p-5 rounded-lg border-2 border-gray-200 shadow-sm">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Client Information</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.fullName }}:</span>
            <p class="text-gray-800 mt-1">{{ data.fullName || 'N/A' }}</p>
          </div>
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.contactNo }}:</span>
            <p class="text-gray-800 mt-1">{{ data.contactNo || 'N/A' }}</p>
          </div>
          <div class="sm:col-span-2">
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.address }}:</span>
            <p class="text-gray-800 mt-1">{{ data.address || 'N/A' }}</p>
          </div>
        </div>
      </div>

      <!-- Event Details Section -->
      <div class="bg-gradient-to-r from-gray-50 to-slate-50 p-5 rounded-lg border-2 border-gray-200 shadow-sm">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Event Details</h3>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.event }}:</span>
            <p class="text-gray-800 mt-1">{{ eventName || 'N/A' }}</p>
          </div>
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.noOfGuest }}:</span>
            <p class="text-gray-800 mt-1">{{ data.noOfGuest || 'N/A' }}</p>
          </div>
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.venue }}:</span>
            <p class="text-gray-800 mt-1">{{ venueName || 'N/A' }}</p>
            @if(venuePrice > 0) {
              <p class="text-sm text-gray-600 mt-1">₱{{ venuePrice | number:'1.2-2' }}</p>
            }
          </div>
        </div>
      </div>

      <!-- Date & Time Section -->
      <div class="bg-gradient-to-r from-gray-50 to-slate-50 p-5 rounded-lg border-2 border-gray-200 shadow-sm">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Date & Time</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.dateFrom }}:</span>
            <p class="text-gray-800 mt-1">{{ formatDateValue(data.dateFrom) }}</p>
          </div>
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.dateTo }}:</span>
            <p class="text-gray-800 mt-1">{{ formatDateValue(data.dateTo) }}</p>
          </div>
        </div>
      </div>

      <!-- Food Packages Section -->
      @if(foodPackages.length > 0) {
        <div class="bg-gradient-to-r from-gray-50 to-slate-50 p-5 rounded-lg border-2 border-gray-200 shadow-sm">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">Food Packages</h3>
          <div class="flex flex-col gap-2">
            @for(pkg of foodPackages; track $index) {
              <div class="flex justify-between items-center pl-4 py-2 bg-white rounded border border-gray-200">
                <span class="text-gray-700">{{ pkg.name }}</span>
                <span class="font-medium text-gray-800">₱{{ pkg.price | number:'1.2-2' }}</span>
              </div>
            }
          </div>
        </div>
      }

      <!-- Services Section -->
      @if(servicePackages.length > 0) {
        <div class="bg-gradient-to-r from-gray-50 to-slate-50 p-5 rounded-lg border-2 border-gray-200 shadow-sm">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">Services</h3>
          <div class="flex flex-col gap-2">
            @for(service of servicePackages; track $index) {
              <div class="flex justify-between items-center pl-4 py-2 bg-white rounded border border-gray-200">
                <span class="text-gray-700">
                  {{ service.name }}
                  @if(service.quantity > 1) {
                    <span class="text-sm text-gray-500">(x{{ service.quantity }})</span>
                  }
                </span>
                <span class="font-medium text-gray-800">
                  ₱{{ (service.price * service.quantity) | number:'1.2-2' }}
                </span>
              </div>
            }
          </div>
        </div>
      }

      <!-- Additional Information Section -->
      <div class="bg-gradient-to-r from-gray-50 to-slate-50 p-5 rounded-lg border-2 border-gray-200 shadow-sm">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Additional Information</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          @if(data.isDiscount || data.discount) {
            <div>
              <span class="text-sm font-semibold text-gray-700">{{ labels.headers.discount }}:</span>
              <p class="text-gray-800 mt-1">
                @if(data.isDiscount && data.discount) {
                  {{ data.discount }}{{ data.discount.toString().includes('%') ? '' : '%' }}
                } @else {
                  {{ data.discount || 'N/A' }}
                }
              </p>
            </div>
          }
          @if(data.remarks) {
            <div class="sm:col-span-2">
              <span class="text-sm font-semibold text-gray-700">{{ labels.headers.remarks }}:</span>
              <p class="text-gray-800 mt-1">{{ data.remarks }}</p>
            </div>
          }
        </div>
      </div>

      <!-- Status & Financial Information Section -->
      <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-5 rounded-lg border-2 border-blue-200 shadow-sm">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Status & Financial Information</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.status }}:</span>
            <p class="text-gray-800 mt-1">{{ getPaymentStatus(data.statusId) }}</p>
          </div>
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.reservationStatus }}:</span>
            <p class="text-gray-800 mt-1">{{ data.status || 'N/A' }}</p>
          </div>
          <div>
            <span class="text-sm font-semibold text-gray-700">{{ labels.headers.totalPrice }}:</span>
            <p class="text-lg font-bold text-green-700 mt-1">₱{{ (data.totalPrice || 0) | number:'1.2-2' }}</p>
          </div>
          @if(data.balance !== undefined) {
            <div>
              <span class="text-sm font-semibold text-gray-700">Balance:</span>
              <p class="text-lg font-bold text-orange-600 mt-1">
                ₱{{ (data.balance == "0" ? data.totalPrice : data.balance) | number:'1.2-2' }}
              </p>
            </div>
          }
        </div>
      </div>

      <!-- Refund Information Section -->
      @if(getRefundInfo().hasRefund || getRefundInfo().refundAmount > 0) {
        <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-5 rounded-lg border-2 border-green-200 shadow-sm">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">Refund Information</h3>
          <div class="flex flex-col gap-3">
            <div class="flex justify-between items-center">
              <span class="font-semibold text-gray-700">Reservation Fee:</span>
              <span class="font-bold text-lg text-gray-900">₱{{ getRefundInfo().reservationFee | number:'1.2-2' }}</span>
            </div>
            @if(getRefundInfo().refundAmount > 0) {
              <div class="flex justify-between items-center pt-2 border-t border-green-200">
                <span class="font-semibold text-gray-700">Refund Amount:</span>
                <span class="font-bold text-xl text-green-600">₱{{ getRefundInfo().refundAmount | number:'1.2-2' }}</span>
              </div>
              @if(getRefundInfo().refundPercentage > 0) {
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Refund Percentage:</span>
                  <span class="text-sm font-medium text-gray-700">
                    {{ getRefundInfo().refundPercentage | number:'1.0-1' }}% of Reservation Fee
                  </span>
                </div>
              }
            }
            @if(getRefundInfo().refundMessage) {
              <div class="mt-2 pt-2 border-t border-green-200">
                <p class="text-sm text-gray-600 italic">{{ getRefundInfo().refundMessage }}</p>
              </div>
            }
          </div>
        </div>
      }
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end" class="gap-3 px-6 pb-4 pt-4 border-t border-gray-200 bg-gray-50">
    <button
      mat-button
      class="px-6"
      (click)="close()"
    >
      Close
    </button>
  </mat-dialog-actions>
</div>

